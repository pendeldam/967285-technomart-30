const modalWindows=document.querySelectorAll(".modal"),modalCloseBtns=document.querySelectorAll(".modal-close-btn");[...modalCloseBtns].forEach(e=>{e.addEventListener("click",e=>{e.target.parentNode.classList.remove("modal--active"),e.target.parentNode.classList.remove("modal--error")})}),[...modalWindows].forEach(e=>{document.addEventListener("keydown",a=>{!e.classList.contains("modal--active")||"Esc"!==a.key&&"Escape"!==a.key||(e.classList.remove("modal--active"),e.classList.remove("modal--error"))})});const modalFeedback=document.querySelector(".modal-feedback"),feedbackLink=document.querySelector(".contacts .site-link"),feedbackUserName=modalFeedback.querySelector("#modal-feedback__user-name"),feedbackUserMail=modalFeedback.querySelector("#modal-feedback__user-mail"),feedbackMessage=modalFeedback.querySelector("#modal-feedback__message");let isLocalStorageExist=!0,storedUserName="",storedUserMail="";try{storedUserName=localStorage.getItem("userName"),storedUserMail=localStorage.getItem("userMail")}catch(e){throw isLocalStorageExist=!1,new Error(e)}feedbackLink.addEventListener("click",e=>{e.preventDefault(),modalFeedback.classList.add("modal--active"),storedUserName?(feedbackUserName.value=storedUserName,feedbackUserMail.value=storedUserMail,feedbackMessage.focus()):feedbackUserName.focus()}),modalFeedback.querySelector("form").addEventListener("submit",e=>{feedbackUserName.value&&feedbackUserMail.value?isLocalStorageExist&&(localStorage.setItem("userName",feedbackUserName.value),localStorage.setItem("userMail",feedbackUserMail.value)):(e.preventDefault(),modalFeedback.classList.remove("modal--error"),modalFeedback.offsetWidth=modalFeedback.offsetWidth,modalFeedback.classList.add("modal--error"))});const modalMap=document.querySelector(".modal-map"),mapLink=document.querySelector(".contacts__map-link");mapLink.addEventListener("click",e=>{e.preventDefault(),modalMap.classList.add("modal--active")});
